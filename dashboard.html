<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ | Tribly</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Theme Variables --- */
        :root {
            --primary: #6ae44d;
            --primary-dark: #4bc72d;
            --secondary: #ffd166;
            --accent: #ef476f;
            --text-main: #2d3436;
            --text-light: #636e72;
            --bg-glass: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
            --radius: 20px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Cairo', 'Poppins', sans-serif;
            background-color: #f0f2f5;
            background-image: radial-gradient(#dfe6e9 1px, transparent 1px);
            background-size: 30px 30px;
            color: var(--text-main);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container { max-width: 1200px; margin: 0 auto; }

        /* --- Header & Tabs --- */
        .page-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 40px; flex-wrap: wrap; gap: 20px;
        }

        .controls { display: flex; gap: 15px; background: white; padding: 5px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

        .tab-btn {
            padding: 10px 25px; border: none; background: transparent;
            font-family: inherit; font-weight: 700; color: var(--text-light);
            border-radius: 12px; cursor: pointer; transition: var(--transition);
            display: flex; align-items: center; gap: 8px;
        }

        .tab-btn.active {
            background: var(--primary); color: #1a1a1a;
            box-shadow: 0 4px 10px rgba(106, 228, 77, 0.4);
        }

        /* --- Grid --- */
        .users-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }

        /* --- User Card --- */
        .user-card {
            background: var(--bg-glass); backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border); border-radius: var(--radius);
            padding: 25px; display: flex; align-items: center; gap: 20px;
            box-shadow: var(--glass-shadow); transition: var(--transition);
            position: relative; overflow: hidden;
        }

        .user-card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.1); }

        .user-card.waitlist {
            border: 2px solid var(--secondary);
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.1), rgba(255, 255, 255, 0.8));
        }

        .user-card.accepted {
            border: 2px solid var(--primary);
            background: rgba(106, 228, 77, 0.1);
        }

        .avatar { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; border: 3px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .user-info { flex: 1; }
        .user-name { font-size: 1.2rem; font-weight: 800; color: var(--text-main); display: block; margin-bottom: 4px; }
        .user-meta { font-size: 0.85rem; color: var(--text-light); display: flex; gap: 10px; align-items: center; margin-bottom: 12px; }

        /* --- Buttons & Tags --- */
        .action-row { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; }
        
        .tag { padding: 5px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; display: inline-flex; align-items: center; gap: 5px; }
        .tag-new { background: rgba(106, 228, 77, 0.15); color: #2d6a1e; }
        .tag-wait { background: rgba(255, 209, 102, 0.2); color: #b7791f; }
        .tag-active { background: rgba(9, 132, 227, 0.15); color: #0c5460; }

        .btn-accept {
            background: var(--primary); color: #1a1a1a; border: none;
            padding: 8px 16px; border-radius: 8px; font-weight: 700;
            cursor: pointer; font-family: inherit; transition: var(--transition);
            display: flex; align-items: center; gap: 8px;
            box-shadow: 0 4px 10px rgba(106, 228, 77, 0.3);
        }
        .btn-accept:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(106, 228, 77, 0.5); }

        .rank-badge { font-size: 1.1rem; font-weight: 800; color: var(--accent); }

        /* --- Stats --- */
        .stats-overview { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: white; padding: 20px; border-radius: var(--radius); box-shadow: var(--glass-shadow); display: flex; align-items: center; gap: 15px; }
        
        @media (max-width: 768px) {
            .stats-overview { grid-template-columns: 1fr; }
            .users-grid { grid-template-columns: 1fr; }
        }

        /* --- Animation --- */
        .fade-in { animation: fadeInUp 0.5s ease-out forwards; opacity: 0; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Notification Toast --- */
        .toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: #2d3436; color: white; padding: 12px 24px; border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); display: flex; align-items: center; gap: 12px;
            opacity: 0; transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); z-index: 1000;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
        .toast i { color: var(--primary); }

    </style>
</head>
<body>

    <div class="container">
        <!-- Header -->
        <div class="page-header fade-in">
            <div class="title-area">
                <h1 style="font-size: 2rem; font-weight: 800;">ğŸ‘¥ Ù…Ø¬ØªÙ…Ø¹ Tribly</h1>
                <p style="color: var(--text-light);">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆÙ‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±.</p>
            </div>

            <div class="controls">
                <button class="tab-btn active" onclick="filterUsers('all', this)">
                    <i class="fas fa-users"></i> Ø§Ù„ÙƒÙ„
                </button>
                <button class="tab-btn" onclick="filterUsers('new', this)">
                    <i class="fas fa-user-check"></i> Ø£Ø¹Ø¶Ø§Ø¡ Ù†Ø´Ø·ÙŠÙ†
                </button>
                <button class="tab-btn" onclick="filterUsers('waitlist', this)">
                    <i class="fas fa-hourglass-half"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                </button>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-overview fade-in">
            <div class="stat-card">
                <div class="stat-icon" style="width:50px;height:50px;background:#e0f7fa;color:#00b894;border-radius:12px;display:flex;align-items:center;justify-content:center;"><i class="fas fa-users"></i></div>
                <div><div class="stat-num" style="font-size:1.5rem;font-weight:800;">1,240</div><div class="stat-desc">Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„</div></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="width:50px;height:50px;background:#fff3cd;color:#ff9f1c;border-radius:12px;display:flex;align-items:center;justify-content:center;"><i class="fas fa-list-ol"></i></div>
                <div><div class="stat-num" style="font-size:1.5rem;font-weight:800;" id="waitlistCount">415</div><div class="stat-desc">ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="width:50px;height:50px;background:#e3f2fd;color:#0984e3;border-radius:12px;display:flex;align-items:center;justify-content:center;"><i class="fas fa-check-circle"></i></div>
                <div><div class="stat-num" style="font-size:1.5rem;font-weight:800;">89%</div><div class="stat-desc">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„</div></div>
            </div>
        </div>

        <!-- Grid -->
        <div class="users-grid" id="usersGrid"></div>

        <!-- Notification Toast -->
        <div class="toast" id="toast">
            <i class="fas fa-check-circle"></i>
            <span id="toastMsg">ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­</span>
        </div>
    </div>

    <script>
        // --- 1. Mock Database ---
        const usersDB = [
            // Waitlist Users
            { id: 1, name: "Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ", type: "waitlist", rank: 401, location: "Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©", joined: "Ù…Ù†Ø° Ø¯Ù‚ÙŠÙ‚Ø©", avatar: "1", status: "online" },
            { id: 2, name: "Ø³Ø§Ø±Ø© Ù…Ø­Ù…Ø¯", type: "waitlist", rank: 402, location: "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©", joined: "Ù…Ù†Ø° 5 Ø¯Ù‚Ø§Ø¦Ù‚", avatar: "2", status: "online" },
            { id: 3, name: "Karim E.", type: "waitlist", rank: 403, location: "Ø§Ù„Ø±ÙŠØ§Ø¶", joined: "Ù…Ù†Ø° 10 Ø¯Ù‚Ø§Ø¦Ù‚", avatar: "3", status: "offline" },
            { id: 4, name: "Ù…Ù†Ù‰ Ø­Ø³Ù†", type: "waitlist", rank: 404, location: "Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©", joined: "Ù…Ù†Ø° 15 Ø¯Ù‚ÙŠÙ‚Ø©", avatar: "4", status: "online" },

            // New/Active Users
            { id: 5, name: "Ø¹Ù…Ø± Ø®Ø§Ù„Ø¯", type: "new", location: "Ø¬Ø¯Ø©", joined: "Ø§Ù„Ø¢Ù†", avatar: "5", status: "online" },
            { id: 6, name: "Nour H.", type: "new", location: "Alex", joined: "Ù…Ù†Ø° 3 Ø¯Ù‚Ø§Ø¦Ù‚", avatar: "6", status: "online" },
            { id: 7, name: "ÙŠÙˆØ³Ù Ù…ØµØ·ÙÙ‰", type: "new", location: "CAIRO", joined: "Ù…Ù†Ø° 12 Ø¯Ù‚ÙŠÙ‚Ø©", avatar: "7", status: "offline" },
            { id: 8, name: "Layla K.", type: "new", location: "Doha", joined: "Ù…Ù†Ø° 30 Ø¯Ù‚ÙŠÙ‚Ø©", avatar: "8", status: "online" },
        ];

        let currentFilter = 'all';

        // --- 2. Accept User Logic ---
        function acceptUser(id) {
            const userIndex = usersDB.findIndex(u => u.id === id);
            
            if (userIndex > -1) {
                // 1. Update Data: Move from Waitlist to New (Active)
                usersDB[userIndex].type = 'new';
                usersDB[userIndex].rank = null; // Remove rank
                usersDB[userIndex].joined = 'ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ù„Ù„ØªÙˆ';
                
                // 2. Show Notification (Sound/Visual Feedback)
                showToast(`ØªÙ… Ù‚Ø¨ÙˆÙ„ ${usersDB[userIndex].name} ÙˆØªØ±Ù‚ÙŠØªÙ‡ Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†`);

                // 3. Update Stats
                updateStats();

                // 4. Re-render the grid
                // If we are on 'waitlist' filter, the card will disappear (which makes sense).
                // If we are on 'all', it will stay but look different.
                renderUsers(currentFilter);
            }
        }

        // --- 3. Render Function ---
        function renderUsers(filterType = 'all') {
            currentFilter = filterType;
            const grid = document.getElementById('usersGrid');
            grid.innerHTML = '';

            let filteredUsers = [];
            if (filterType === 'all') {
                filteredUsers = usersDB;
            } else if (filterType === 'waitlist') {
                filteredUsers = usersDB.filter(u => u.type === 'waitlist');
            } else if (filterType === 'new') {
                filteredUsers = usersDB.filter(u => u.type === 'new');
            }

            // Sorting logic
            if(filterType === 'waitlist') {
                filteredUsers.sort((a, b) => a.rank - b.rank);
            } else {
                filteredUsers.sort((a, b) => a.id - b.id);
            }

            filteredUsers.forEach((user, index) => {
                const card = document.createElement('div');
                card.className = `user-card fade-in ${user.type === 'waitlist' ? 'waitlist' : ''}`;
                card.style.animationDelay = `${index * 0.05}s`;

                // Dynamic Content based on type
                let actionHTML = '';
                
                if (user.type === 'waitlist') {
                    // Show Accept Button for Waitlist users
                    actionHTML = `
                        <button class="btn-accept" onclick="acceptUser(${user.id})">
                            <i class="fas fa-check"></i> Ù‚Ø¨ÙˆÙ„
                        </button>
                    `;
                } else {
                    // Show Active Badge for Normal users
                    actionHTML = `
                        <span class="tag tag-active"><i class="fas fa-user-check"></i> Ù†Ø´Ø·</span>
                    `;
                }

                let tagHTML = '';
                if (user.type === 'waitlist') {
                    tagHTML = `<span class="tag tag-wait"><i class="fas fa-hourglass-half"></i> ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>`;
                } else {
                    tagHTML = `<span class="tag tag-new"><i class="fas fa-bolt"></i> Ø¹Ø¶Ùˆ VIP</span>`;
                }

                let rankHTML = '';
                if (user.type === 'waitlist') {
                    rankHTML = `<span class="rank-badge">#${user.rank}</span>`;
                }

                card.innerHTML = `
                    <div style="position:relative;">
                        <img src="https://picsum.photos/seed/${user.avatar}/100/100" class="avatar" alt="${user.name}">
                        ${user.status === 'online' ? '<div style="position:absolute;bottom:0;right:0;width:15px;height:15px;background:#00b894;border:2px solid white;border-radius:50%;"></div>' : ''}
                    </div>
                    <div class="user-info">
                        <span class="user-name">${user.name}</span>
                        <div class="user-meta">
                            <span><i class="fas fa-map-marker-alt"></i> ${user.location}</span>
                            <span>â€¢</span>
                            <span><i class="far fa-clock"></i> ${user.joined}</span>
                        </div>
                        <div class="action-row">
                            ${tagHTML}
                            ${rankHTML}
                        </div>
                        <div class="action-row" style="margin-top:10px;">
                            ${actionHTML}
                            ${user.type !== 'waitlist' ? '<i class="fas fa-ellipsis-v" style="color:#ccc;cursor:pointer;"></i>' : ''}
                        </div>
                    </div>
                `;

                grid.appendChild(card);
            });

            if(filteredUsers.length === 0) {
                grid.innerHTML = `<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #aaa;">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>`;
            }
        }

        // --- 4. Update Stats Helper ---
        function updateStats() {
            const waitlistCount = usersDB.filter(u => u.type === 'waitlist').length;
            document.getElementById('waitlistCount').textContent = waitlistCount;
        }

        // --- 5. Toast Notification ---
        function showToast(message) {
            const toast = document.getElementById('toast');
            const msgSpan = document.getElementById('toastMsg');
            msgSpan.textContent = message;
            
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // --- 6. Tab Logic ---
        function filterUsers(type, btnElement) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');
            renderUsers(type);
        }

        // --- 7. Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderUsers('all');
            updateStats();
        });

    </script>
</body>
</html>