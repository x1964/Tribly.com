<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0">
    <meta name="theme-color" content="#6ae44d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± - Tribly</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js"></script>
    <script src="js/firebase-init.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
            display: flex;
            flex-direction: column;
        }

        /* Navbar */
        nav {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #6ae44d;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #ccc;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #6ae44d;
        }

        /* Main Container */
        .container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .waitlist-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(106, 228, 77, 0.3);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .waitlist-icon {
            font-size: 3.5rem;
            color: #6ae44d;
            margin-bottom: 1.5rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .queue-number {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .queue-badge {
            display: inline-block;
            background: linear-gradient(135deg, #6ae44d, #a5ff84);
            color: #000;
            padding: 1rem 2rem;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            min-width: 150px;
            box-shadow: 0 4px 15px rgba(106, 228, 77, 0.4);
        }

        .queue-number-large {
            font-size: 3rem;
            font-weight: 800;
            color: #6ae44d;
            line-height: 1;
        }

        .queue-label {
            font-size: 0.9rem;
            color: #000;
            margin-top: 0.5rem;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .subtitle {
            font-size: 1rem;
            color: #aaa;
            margin-bottom: 2rem;
        }

        .info-box {
            background: rgba(106, 228, 77, 0.1);
            border-left: 4px solid #6ae44d;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: right;
        }

        .info-box p {
            margin: 0.5rem 0;
            color: #ddd;
        }

        .info-box strong {
            color: #6ae44d;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(106, 228, 77, 0.2);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #6ae44d;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #aaa;
            margin-top: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            border: 1px solid rgba(106, 228, 77, 0.2);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #6ae44d, #a5ff84);
            width: 35%;
            border-radius: 10px;
            animation: fillProgress 2s ease-in-out infinite;
        }

        @keyframes fillProgress {
            0%, 100% {
                width: 35%;
            }
            50% {
                width: 40%;
            }
        }

        .progress-label {
            font-size: 0.8rem;
            color: #aaa;
            margin-bottom: 2rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6ae44d, #a5ff84);
            color: #000;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(106, 228, 77, 0.4);
        }

        .btn-secondary {
            background: rgba(106, 228, 77, 0.1);
            color: #6ae44d;
            border: 2px solid #6ae44d;
        }

        .btn-secondary:hover {
            background: rgba(106, 228, 77, 0.2);
        }

        .social-share {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .social-share p {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 1rem;
        }

        .social-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }

        .social-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(106, 228, 77, 0.1);
            border: 2px solid #6ae44d;
            color: #6ae44d;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .social-btn:hover {
            background: #6ae44d;
            color: #000;
            transform: translateY(-3px);
        }

        /* Footer */
        footer {
            background: rgba(0, 0, 0, 0.3);
            padding: 2rem;
            text-align: center;
            color: #aaa;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        footer a {
            color: #6ae44d;
            text-decoration: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .waitlist-card {
                padding: 2rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            .queue-number-large {
                font-size: 2.5rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .stats {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            nav {
                padding: 1rem;
            }

            .waitlist-card {
                padding: 1.5rem;
                border-radius: 15px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .waitlist-icon {
                font-size: 2.5rem;
            }

            .queue-number-large {
                font-size: 2rem;
            }

            .queue-badge {
                padding: 0.75rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav>
        <a href="index.html" class="logo">
            <i class="fas fa-fire"></i> Tribly
        </a>
        <ul class="nav-links">
            <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
            <li><a href="about.html">Ø­ÙˆÙ„</a></li>
            <li><a href="login.html">Ø¯Ø®ÙˆÙ„</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="waitlist-card">
            <!-- Icon -->
            <div class="waitlist-icon">
                <i class="fas fa-hourglass-end"></i>
            </div>

            <!-- Queue Number -->
            <div class="queue-number">Ø±Ù‚Ù… Ø¯ÙˆØ±Ùƒ</div>
            <div class="queue-badge">
                <div class="queue-number-large" id="queueNumber">1245</div>
                <div class="queue-label">ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
            </div>

            <!-- Title -->
            <h1>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ! ğŸ‰</h1>
            <p class="subtitle">Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆØµÙˆÙ„ Ù…Ø¨ÙƒØ± Ø¥Ù„Ù‰ Tribly</p>

            <!-- Info Box -->
            <div class="info-box">
                <p>ğŸ“§ <strong>Ø¨Ø±ÙŠØ¯Ùƒ:</strong> <span id="userEmail">example@email.com</span></p>
                <p>ğŸ“… <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</strong> <span id="registrationDate">21 ÙŠÙ†Ø§ÙŠØ± 2026</span></p>
                <p>ğŸ¯ <strong>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</strong> <span id="priority">Ø¹Ø§Ù„ÙŠØ©</span></p>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" id="peopleAhead">1,245</div>
                    <div class="stat-label">Ø£Ø´Ø®Ø§Øµ Ù‚Ø¨Ù„Ùƒ</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="percentComplete">35%</div>
                    <div class="stat-label">ØªÙ‚Ø¯Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
            <p class="progress-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯Ø¹ÙˆÙŠÙ† Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="copyQueueNumber()">
                    <i class="fas fa-copy"></i> Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø¯ÙˆØ±
                </button>
                <button class="btn btn-secondary" onclick="shareWaitlist()">
                    <i class="fas fa-share-alt"></i> Ø´Ø§Ø±Ùƒ
                </button>
            </div>

            <!-- Social Share -->
            <div class="social-share">
                <p>Ø´Ø§Ø±Ùƒ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙˆØ§Ø±ÙØ¹ Ø£ÙˆÙ„ÙˆÙŠØªÙƒ ğŸ“¢</p>
                <div class="social-buttons">
                    <button class="social-btn" title="WhatsApp" onclick="shareOnWhatsApp()">
                        <i class="fab fa-whatsapp"></i>
                    </button>
                    <button class="social-btn" title="Twitter" onclick="shareOnTwitter()">
                        <i class="fab fa-twitter"></i>
                    </button>
                    <button class="social-btn" title="Facebook" onclick="shareOnFacebook()">
                        <i class="fab fa-facebook"></i>
                    </button>
                    <button class="social-btn" title="Email" onclick="shareViaEmail()">
                        <i class="fas fa-envelope"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Tribly - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© | <a href="privacy.html">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a> | <a href="service.html">Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø©</a></p>
    </footer>

    <script>
        let currentUserId = null;
        let currentQueueNumber = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // Check if user is already registered
                const storedUserId = localStorage.getItem('userId');
                const storedEmail = localStorage.getItem('userEmail');

                if (storedUserId && storedEmail) {
                    // Get user info from Firebase
                    currentUserId = storedUserId;
                    const userInfo = await waitlistManager.getUserInfo(storedUserId);
                    if (userInfo) {
                        updateUIWithUserData(userInfo);
                        return;
                    }
                }

                // Show registration form if not registered
                showRegistrationForm();
            } catch (error) {
                console.error('Error initializing page:', error);
                // Fallback to demo mode
                setupDemoMode();
            }
        });

        // Update UI with user data
        async function updateUIWithUserData(userData) {
            currentQueueNumber = userData.queueNumber;

            // Get user position
            const position = await waitlistManager.getUserPosition(userData.queueNumber);
            const queueSize = await waitlistManager.getQueueSize();
            const percentComplete = Math.floor((queueSize - position) / queueSize * 100);

            // Update display
            document.getElementById('queueNumber').textContent = userData.queueNumber.toLocaleString('ar-EG');
            document.getElementById('userEmail').textContent = userData.email;
            document.getElementById('registrationDate').textContent = userData.registrationDate;
            document.getElementById('priority').textContent = userData.priority;
            document.getElementById('peopleAhead').textContent = (position || 0).toLocaleString('ar-EG');
            document.getElementById('percentComplete').textContent = percentComplete + '%';

            // Update progress bar
            const progressFill = document.querySelector('.progress-fill');
            if (progressFill) {
                progressFill.style.width = percentComplete + '%';
            }

            // Hide registration form if visible
            const regForm = document.getElementById('registrationForm');
            if (regForm) {
                regForm.style.display = 'none';
            }
        }

        // Show registration form
        function showRegistrationForm() {
            const waitlistCard = document.querySelector('.waitlist-card');
            const formHTML = `
                <div id="registrationForm" style="text-align: center;">
                    <h2>Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Tribly ğŸ‰</h2>
                    <p style="color: #aaa; margin-bottom: 2rem;">Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø¯ÙˆØ± ÙØ±ÙŠØ¯</p>
                    
                    <div style="display: flex; gap: 0.75rem; margin-bottom: 1rem;">
                        <input 
                            type="email" 
                            id="emailInput" 
                            placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" 
                            style="flex: 1; padding: 0.75rem; border: 2px solid #6ae44d; border-radius: 8px; background: rgba(255,255,255,0.05); color: #fff; font-size: 0.95rem;"
                            onkeypress="if(event.key==='Enter') registerNewUser()">
                        <button 
                            onclick="registerNewUser()" 
                            style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #6ae44d, #a5ff84); color: #000; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;"
                            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(106, 228, 77, 0.4)'"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            Ø§Ù†Ø¶Ù… Ø§Ù„Ø¢Ù†
                        </button>
                    </div>
                    
                    <p style="color: #888; font-size: 0.85rem;">Ù„Ø§ ØªÙ‚Ù„Ù‚ØŒ Ù†Ø­Ù† Ù„Ù† Ù†Ø±Ø³Ù„ Ù„Ùƒ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø²Ø¹Ø¬ ğŸ“§</p>
                </div>
            `;

            // Insert form before the queue display
            const queueSection = document.querySelector('.queue-number');
            if (queueSection) {
                queueSection.parentElement.insertAdjacentHTML('beforebegin', formHTML);
            }
        }

        // Register new user
        async function registerNewUser() {
            const emailInput = document.getElementById('emailInput');
            if (!emailInput) return;

            const email = emailInput.value.trim();

            if (!email || !email.includes('@')) {
                alert('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­');
                return;
            }

            try {
                const button = event.target;
                button.disabled = true;
                button.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...';

                // Register user
                const userData = await waitlistManager.registerUser(email);
                currentUserId = userData.id;
                currentQueueNumber = userData.queueNumber;

                // Hide form and update UI
                const regForm = document.getElementById('registrationForm');
                if (regForm) {
                    regForm.remove();
                }

                // Update UI with new user data
                await updateUIWithUserData(userData);

                alert('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø±Ù‚Ù… Ø¯ÙˆØ±Ùƒ: ' + userData.queueNumber);

            } catch (error) {
                console.error('Error registering user:', error);
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ' + error.message);
                event.target.disabled = false;
                event.target.textContent = 'Ø§Ù†Ø¶Ù… Ø§Ù„Ø¢Ù†';
            }
        }

        // Setup demo mode (fallback)
        function setupDemoMode() {
            const queueNumber = Math.floor(Math.random() * 4000) + 1000;
            const position = Math.floor(Math.random() * 1000) + 245;
            const percentComplete = 35;

            localStorage.setItem('queueNumber', queueNumber);
            localStorage.setItem('userEmail', 'user@example.com');
            localStorage.setItem('registrationDate', new Date().toLocaleDateString('ar-EG'));

            document.getElementById('queueNumber').textContent = queueNumber.toLocaleString('ar-EG');
            document.getElementById('userEmail').textContent = 'user@example.com';
            document.getElementById('registrationDate').textContent = new Date().toLocaleDateString('ar-EG');
            document.getElementById('peopleAhead').textContent = position.toLocaleString('ar-EG');
            document.getElementById('percentComplete').textContent = percentComplete + '%';
        }

        // Copy queue number
        function copyQueueNumber() {
            const queueNumber = document.getElementById('queueNumber').textContent;
            navigator.clipboard.writeText(queueNumber).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø¯ÙˆØ±!');
            });
        }

        // Share waitlist
        function shareWaitlist() {
            const queueNumber = document.getElementById('queueNumber').textContent;
            const text = `Ø§Ù†Ø¶Ù…Øª Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù†ØªØ¸Ø§Ø± Tribly! Ø±Ù‚Ù… Ø¯ÙˆØ±ÙŠ: ${queueNumber} ğŸ‰\nØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ÙˆØµÙˆÙ„ Ù…Ø¨ÙƒØ±: https://tribly.com/waitlist`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Tribly Waitlist',
                    text: text
                });
            } else {
                alert(text);
            }

            // Track share
            if (currentUserId) {
                waitlistManager.trackShare(currentUserId, 'native');
            }
        }

        // Social media sharing
        function shareOnWhatsApp() {
            const queueNumber = document.getElementById('queueNumber').textContent;
            const text = encodeURIComponent(`ğŸ‰ Ø§Ù†Ø¶Ù…Øª Ø¥Ù„Ù‰ Tribly!\nØ±Ù‚Ù… Ø¯ÙˆØ±ÙŠ: ${queueNumber}\n\nØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ÙˆØµÙˆÙ„ Ù…Ø¨ÙƒØ±: https://tribly.com/waitlist`);
            window.open(`https://wa.me/?text=${text}`);

            if (currentUserId) {
                waitlistManager.trackShare(currentUserId, 'whatsapp');
                waitlistManager.addReferral(currentUserId);
            }
        }

        function shareOnTwitter() {
            const queueNumber = document.getElementById('queueNumber').textContent;
            const text = encodeURIComponent(`Ø§Ù†Ø¶Ù…Øª Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù†ØªØ¸Ø§Ø± @Tribly! ğŸš€\nØ±Ù‚Ù… Ø¯ÙˆØ±ÙŠ: ${queueNumber}\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…ØŸ https://tribly.com/waitlist`);
            window.open(`https://twitter.com/intent/tweet?text=${text}`);

            if (currentUserId) {
                waitlistManager.trackShare(currentUserId, 'twitter');
                waitlistManager.addReferral(currentUserId);
            }
        }

        function shareOnFacebook() {
            window.open('https://www.facebook.com/sharer/sharer.php?u=https://tribly.com/waitlist', '_blank');

            if (currentUserId) {
                waitlistManager.trackShare(currentUserId, 'facebook');
                waitlistManager.addReferral(currentUserId);
            }
        }

        function shareViaEmail() {
            const queueNumber = document.getElementById('queueNumber').textContent;
            const userEmail = document.getElementById('userEmail').textContent;
            const subject = encodeURIComponent('Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Tribly - Ø£ÙˆØ¬Ø¯ Ù‚Ø¨ÙŠÙ„ØªÙƒ');
            const body = encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ\n\nØ§Ù†Ø¶Ù…Øª Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù†ØªØ¸Ø§Ø± Tribly ÙˆØ­ØµÙ„Øª Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø¯ÙˆØ±: ${queueNumber}\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…ØŸ\nhttps://tribly.com/waitlist\n\nØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨ÙŠ: ${userEmail}`);
            window.location.href = `mailto:?subject=${subject}&body=${body}`;

            if (currentUserId) {
                waitlistManager.trackShare(currentUserId, 'email');
                waitlistManager.addReferral(currentUserId);
            }
        }
    </script>
</body>
</html>
